<!--header-->
<app-home-header
  (viewType)="getViewType($event)"
  (searchFilter)="getSearchFilter($event)"
>
</app-home-header>
<!--scorecard views and details-->

<div class="container-fluid mt-3">
  <div
    class="flex-container"
    [ngStyle]="{ 'justify-content': type === 'card' ? 'center' : 'start' }"
    *ngIf="type !== 'list'"
  >
    <mat-card
      class="cursor"
      @fadeSmooth
      (click)="viewScorecard($event)"
      [ngClass]="[
        type === 'thumbnails' ? 'col-md-5 thumbnail-layout' : '',
        type === 'card' ? 'card-layout col-md-3' : ''
      ]"
      *ngFor="let card of scorecards | filter: filter | paginate: config"
    >
      <mat-icon
        class="actions-icon-btn cursor"
        (click)="$event.stopPropagation()"
        matRipple
        matTooltip="Edit or Delete a scorecard"
        [matMenuTriggerFor]="actionsMenu"
        >more_vert</mat-icon
      >
      <mat-menu #actionsMenu="matMenu">
        <button mat-menu-item>
          <mat-icon class="text-warning">edit</mat-icon>Edit
        </button>
        <button mat-menu-item (click)="openDeleteDialog(card.name)">
          <mat-icon class="text-danger">delete</mat-icon>Delete
        </button>
      </mat-menu>

      <div class="scorecard-header">
        <img src="assets/images/scorecard.png" />
      </div>
      <div class="scorecard-content">
        <h4>{{ card.name | truncate: [20, '...'] }}</h4>
        <p>{{ card.description | truncate: [30, '...'] }}</p>
      </div>
    </mat-card>
  </div>
  <div class="flex-container mat-elevation-z1" *ngIf="type === 'list'">
    <table @fadeSmooth class="table table-hover">
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
          <th>Last modified</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr
          class="cursor"
          (click)="viewScorecard($event)"
          matTooltip="View a scorecard"
          *ngFor="let card of scorecards | filter: filter | paginate: config"
        >
          <td>
            <img
              style="height: 2.5em; width: 3em;"
              src="assets/images/scorecard.png"
            />
            &nbsp;{{ card.name }}
          </td>
          <td>{{ card.description }}</td>
          <td></td>
          <td>
            <mat-icon
              class="actions-icon-btn cursor"
              (click)="$event.stopPropagation()"
              matRipple
              matTooltip="Edit or Delete a scorecard"
              [matMenuTriggerFor]="actionsMenu"
              >more_vert</mat-icon
            >
            <mat-menu #actionsMenu="matMenu">
              <button mat-menu-item>
                <mat-icon class="text-warning">edit</mat-icon>Edit
              </button>
              <button mat-menu-item (click)="openDeleteDialog(card.name)">
                <mat-icon class="text-danger">delete</mat-icon>Delete
              </button>
            </mat-menu>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!--Create a scorecard button-->
  <button
    mat-fab
    color="primary"
    style="position: fixed; right: 2%; bottom: 4%;"
    (click)="createNew()"
    matTooltip="Create a new scorecard"
  >
    <mat-icon>add</mat-icon>
  </button>
  <!--pagination control-->
  <div class="pagination-section" style="margin-top: 2%;">
    <mat-paginator
      [length]="config.totalItems"
      [pageSize]="config.itemsPerPage"
      [pageSizeOptions]="[config.itemsPerPage]"
      (page)="pageChanged($event)"
    >
    </mat-paginator>
  </div>
</div>
